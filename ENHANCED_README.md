# 🚀 Solana 清算机器人 - 全功能版

一个完全基于前端的 Solana 清算机器人，集成了所有 bot 功能，可以在 Vercel 上独立运行。

## ✨ 新功能特性

### 🔗 钱包集成
- **多钱包支持**: Phantom, Solflare, Torus
- **一键连接**: 简单的钱包连接界面
- **交易签名**: 直接在浏览器中签名交易
- **安全交易**: 无需服务器端私钥管理

### 🔍 增强扫描功能
- **多协议支持**: Solend, Mango, Kamino
- **实时扫描**: 手动扫描和自动监控
- **详细分析**: 健康因子、盈利计算、风险评估
- **协议分布**: 各协议的清算机会统计

### ⚡ 交易执行
- **直接清算**: 使用自有资金进行清算
- **闪电贷清算**: 无本金清算（需要闪电贷协议支持）
- **盈利检查**: 自动计算交易成本和盈利
- **交易确认**: 实时交易状态跟踪

### 🔄 后台任务
- **自动监控**: 定时扫描清算机会
- **机会通知**: 发现新机会时的实时通知
- **任务管理**: 启动/停止监控任务
- **状态跟踪**: 实时任务状态和统计

### 📊 增强界面
- **实时数据**: 动态更新的清算机会列表
- **操作按钮**: 一键执行清算交易
- **结果展示**: 交易执行结果和盈利统计
- **响应式设计**: 支持移动端和桌面端

## 🛠️ 技术栈

### 前端技术
- **框架**: Next.js 14 (React 18)
- **语言**: TypeScript
- **样式**: TailwindCSS
- **钱包**: Solana Wallet Adapter

### 区块链集成
- **RPC**: Solana Web3.js
- **钱包**: 多钱包适配器
- **交易**: 直接交易签名和执行
- **协议**: Solend, Mango, Kamino

### 部署平台
- **托管**: Vercel
- **API**: Next.js API Routes
- **环境**: 完全前端运行

## 📦 项目结构

```
solana-liquidation-dashboard/
├── app/
│   ├── api/liquidation/          # API 路由
│   ├── enhanced-page.tsx          # 增强版主页面
│   ├── page.tsx                   # 主页面入口
│   └── layout.tsx                 # 布局文件
├── lib/
│   ├── wallet.ts                  # 钱包和交易功能
│   ├── wallet-provider.tsx        # 钱包上下文提供者
│   ├── enhanced-scanner.ts        # 增强扫描器
│   ├── background-tasks.ts        # 后台任务管理
│   └── solend.ts                  # 原有 Solend 扫描器
├── package.json                   # 依赖配置
└── vercel.json                    # Vercel 部署配置
```

## 🚀 快速开始

### 1. 安装依赖
```bash
npm install
```

### 2. 开发模式运行
```bash
npm run dev
```

### 3. 访问应用
打开 http://localhost:3000

## 💡 使用说明

### 连接钱包
1. 点击右上角的"连接钱包"按钮
2. 选择支持的钱包（Phantom, Solflare, Torus）
3. 授权连接

### 扫描清算机会
1. **手动扫描**: 点击"手动扫描"按钮
2. **自动监控**: 点击"启动监控"开始后台扫描
3. **停止监控**: 点击"停止监控"停止后台任务

### 执行清算
1. 在账户列表中找到可清算的账户
2. 点击"清算"按钮执行直接清算
3. 点击"闪电贷"按钮执行闪电贷清算
4. 在钱包中确认交易

### 查看结果
- 交易执行结果会显示在页面底部
- 包含交易签名、盈利金额、Gas 费用等信息

## ⚙️ 配置说明

### 环境变量
```env
NEXT_PUBLIC_RPC_ENDPOINT=https://api.mainnet-beta.solana.com
NEXT_PUBLIC_HELIUS_API_KEY=your-helius-api-key
```

### 后台任务配置
```typescript
{
  scanInterval: 30000,        // 扫描间隔（毫秒）
  maxOpportunities: 50,       // 最大缓存机会数
  enableNotifications: true,  // 是否启用通知
  minProfitThreshold: 10.0,   // 最小盈利阈值（USD）
}
```

## 🌐 部署到 Vercel

### 方法 1: 命令行部署
```bash
# 安装 Vercel CLI
npm install -g vercel

# 登录
vercel login

# 部署
vercel

# 生产环境部署
vercel --prod
```

### 方法 2: GitHub 集成
1. 将代码推送到 GitHub
2. 访问 [vercel.com](https://vercel.com)
3. 导入 GitHub 仓库
4. 点击 Deploy

## 🔧 功能对比

| 功能 | 原版 Dashboard | Bot 项目 | 全功能版 |
|------|----------------|----------|----------|
| 数据展示 | ✅ | ❌ | ✅ |
| 钱包连接 | ❌ | ❌ | ✅ |
| 交易执行 | ❌ | ✅ | ✅ |
| 多协议扫描 | ❌ | ✅ | ✅ |
| 后台监控 | ❌ | ✅ | ✅ |
| 闪电贷 | ❌ | ✅ | ✅ |
| 前端部署 | ✅ | ❌ | ✅ |
| 服务器需求 | ❌ | ✅ | ❌ |

## ⚠️ 注意事项

### 安全提醒
1. **私钥安全**: 私钥仅在用户钱包中，不会发送到服务器
2. **交易确认**: 所有交易都需要用户手动确认
3. **网络费用**: 执行交易会产生 Solana 网络费用
4. **滑点风险**: 市场波动可能影响交易结果

### 功能限制
1. **闪电贷**: 需要协议支持，目前为框架实现
2. **实时性**: 前端扫描可能不如专业 bot 快速
3. **浏览器限制**: 依赖浏览器性能和网络连接

## 🎯 未来计划

- [ ] 集成更多闪电贷协议
- [ ] 添加价格预言机集成
- [ ] 实现更精确的盈利计算
- [ ] 添加交易历史记录
- [ ] 支持更多借贷协议
- [ ] 添加移动端优化

## 📄 许可证

MIT

## 🤝 贡献

欢迎提交 Issue 和 Pull Request！

---

**版本**: v2.0.0  
**状态**: ✅ 全功能可用  
**部署**: Vercel 兼容
